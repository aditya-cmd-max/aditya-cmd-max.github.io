<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reverbit - Dashboard</title>
    <meta name="description" content="Your Reverbit Dashboard - Manage all your AI tools in one place">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700;800&family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

    <style>
        /* Material Design 3 Color System with Enhanced Blue/Green - MATCHING REVERBIT */
        :root {
            /* Primary Colors - Blue Theme */
            --md-primary: #1a73e8;
            --md-primary-light: #4285f4;
            --md-primary-dark: #0d47a1;
            --md-on-primary: #FFFFFF;
            --md-primary-container: #d2e3fc;
            --md-on-primary-container: #001d3d;
            
            /* Secondary Colors - Green Theme */
            --md-secondary: #0d8a72;
            --md-secondary-light: #34a853;
            --md-secondary-dark: #0a5c42;
            --md-on-secondary: #FFFFFF;
            --md-secondary-container: #b8f2e6;
            --md-on-secondary-container: #00201a;
            
            /* Surface Colors */
            --md-surface: #FFFFFF;
            --md-on-surface: #202124;
            --md-surface-variant: #F8F9FA;
            --md-on-surface-variant: #5f6368;
            
            /* Background Colors */
            --md-background: #FFFFFF;
            --md-on-background: #202124;
            
            /* Outline Colors */
            --md-outline: #DADCE0;
            --md-outline-variant: #E8EAED;
            
            /* Shadow Elevations */
            --md-elevation-1: 0 1px 2px rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
            --md-elevation-2: 0 1px 2px rgba(60,64,67,0.3), 0 2px 6px 2px rgba(60,64,67,0.15);
            --md-elevation-3: 0 1px 3px 1px rgba(60,64,67,0.15), 0 1px 2px rgba(60,64,67,0.3);
            --md-elevation-4: 0 4px 12px rgba(0, 0, 0, 0.1);
            
            /* Animation */
            --md-transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
            --md-transition-fast: all 0.15s cubic-bezier(0.2, 0, 0, 1);
            
            /* Border Radius */
            --md-radius-small: 8px;
            --md-radius-medium: 12px;
            --md-radius-large: 16px;
            --md-radius-extra-large: 28px;
            --md-radius-pill: 9999px;
            
            /* Spacing */
            --md-spacing-xs: 4px;
            --md-spacing-sm: 8px;
            --md-spacing-md: 16px;
            --md-spacing-lg: 24px;
            --md-spacing-xl: 32px;
            --md-spacing-xxl: 48px;
            
            /* Typography */
            --md-font-logo: 'Playfair Display', serif;
            --md-font-heading: 'Inter', sans-serif;
            --md-font-body: 'Lora', serif;
        }

        /* Dark Theme */
        .dark-theme {
            --md-surface: #202124;
            --md-on-surface: #FFFFFF;
            --md-surface-variant: #303134;
            --md-on-surface-variant: #E8EAED;
            --md-background: #202124;
            --md-on-background: #FFFFFF;
            --md-primary: #8ab4f8;
            --md-primary-light: #aecbfa;
            --md-primary-container: #174ea6;
            --md-on-primary-container: #E8EAED;
            --md-secondary: #81c995;
            --md-secondary-light: #a8dab5;
            --md-secondary-container: #0d8a72;
            --md-on-secondary-container: #E8EAED;
            --md-outline: #3C4043;
            --md-outline-variant: #5F6368;
            --md-elevation-1: 0 1px 2px rgba(0,0,0,0.3), 0 1px 3px 1px rgba(0,0,0,0.15);
            --md-elevation-2: 0 1px 2px rgba(0,0,0,0.3), 0 2px 6px 2px rgba(0,0,0,0.15);
            --md-elevation-3: 0 1px 3px 1px rgba(0,0,0,0.15), 0 1px 2px rgba(0,0,0,0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--md-font-body);
            background-color: var(--md-background);
            color: var(--md-on-surface);
            line-height: 1.6;
            overflow-x: hidden;
            transition: var(--md-transition);
        }

        /* NEW: Interactive cursor effect */
        .interactive-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 99999;
            mix-blend-mode: difference;
            background: var(--md-primary);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, background 0.3s;
        }

        .cursor-dot {
            position: fixed;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 99999;
            background: var(--md-secondary);
            transform: translate(-50%, -50%);
            transition: transform 0.1s;
        }

        /* Enhanced Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
            overflow: hidden;
        }

        .gradient-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(26, 115, 232, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(13, 138, 114, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(66, 133, 244, 0.1) 0%, transparent 50%);
            animation: gradientMove 20s ease infinite alternate;
        }

        .mesh-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(90deg, transparent 95%, rgba(26, 115, 232, 0.05) 100%),
                linear-gradient(transparent 95%, rgba(13, 138, 114, 0.05) 100%);
            background-size: 50px 50px;
            animation: meshFloat 40s linear infinite;
        }

        @keyframes gradientMove {
            0% {
                transform: translate(0%, 0%) scale(1);
            }
            100% {
                transform: translate(-2%, -2%) scale(1.1);
            }
        }

        @keyframes meshFloat {
            0% {
                transform: translate(0, 0);
            }
            100% {
                transform: translate(50px, 50px);
            }
        }

        /* Floating SVG Elements */
        .floating-element {
            position: fixed;
            z-index: -2;
            pointer-events: none;
            opacity: 0.4;
        }

        .floating-element-1 {
            top: 10%;
            left: 5%;
            width: 150px;
            height: 150px;
            animation: floatElement 20s infinite ease-in-out;
        }

        .floating-element-2 {
            top: 70%;
            right: 10%;
            width: 120px;
            height: 120px;
            animation: floatElement 25s infinite ease-in-out reverse;
        }

        .floating-element-3 {
            bottom: 20%;
            left: 15%;
            width: 100px;
            height: 100px;
            animation: floatElement 30s infinite ease-in-out;
        }

        .floating-element-4 {
            top: 30%;
            right: 5%;
            width: 80px;
            height: 80px;
            animation: floatElement 35s infinite ease-in-out reverse;
        }

        @keyframes floatElement {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg);
            }
            33% {
                transform: translate(20px, -20px) rotate(5deg);
            }
            66% {
                transform: translate(-10px, 10px) rotate(-5deg);
            }
        }

        /* Modern Floating Pill Navbar */
        .floating-navbar {
            position: fixed;
            top: var(--md-spacing-lg);
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--md-radius-pill);
            padding: var(--md-spacing-sm) var(--md-spacing-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--md-spacing-md);
            z-index: 1000;
            box-shadow: var(--md-elevation-4);
            transition: var(--md-transition);
            max-width: 1200px;
            width: 90%;
        }

        .dark-theme .floating-navbar {
            background: rgba(32, 33, 36, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: var(--md-spacing-sm);
            text-decoration: none;
            flex-shrink: 0;
        }

        .nav-logo {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--md-primary), var(--md-secondary));
            border-radius: var(--md-radius-medium);
            color: var(--md-on-primary);
            font-weight: 700;
            transition: var(--md-transition);
            flex-shrink: 0;
        }

        .nav-logo:hover {
            transform: rotate(15deg) scale(1.1);
        }

        .nav-name {
            font-family: var(--md-font-logo);
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--md-on-surface);
            letter-spacing: -0.5px;
            white-space: nowrap;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--md-spacing-sm);
            padding: var(--md-spacing-md) var(--md-spacing-xl);
            border-radius: var(--md-radius-pill);
            border: none;
            font-family: var(--md-font-heading);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--md-transition);
            text-decoration: none;
            min-height: 48px;
        }

        .btn-filled {
            background: linear-gradient(135deg, var(--md-primary), var(--md-secondary));
            color: var(--md-on-primary);
            box-shadow: var(--md-elevation-2);
        }

        .btn-filled:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: var(--md-elevation-3);
        }

        .btn-outlined {
            background: transparent;
            color: var(--md-primary);
            border: 1px solid var(--md-outline);
        }

        .btn-outlined:hover {
            background: var(--md-primary-container);
            border-color: var(--md-primary);
            transform: translateY(-2px);
        }

        /* Dashboard Layout */
        .dashboard-container {
            padding-top: 120px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 120px var(--md-spacing-xl) var(--md-spacing-xxl);
        }

        /* Hero Section */
        .dashboard-hero {
            padding: var(--md-spacing-xxl) 0;
            text-align: center;
            margin-bottom: var(--md-spacing-xxl);
        }

        .dashboard-hero h1 {
            font-family: var(--md-font-logo);
            font-size: clamp(3.5rem, 8vw, 4.5rem);
            font-weight: 800;
            margin-bottom: var(--md-spacing-lg);
            background: linear-gradient(135deg, var(--md-primary) 0%, var(--md-secondary) 50%, var(--md-primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
            letter-spacing: -1px;
        }

        .dashboard-hero p {
            font-family: var(--md-font-heading);
            font-size: clamp(1.25rem, 2.5vw, 1.75rem);
            color: var(--md-on-surface-variant);
            max-width: 700px;
            margin: 0 auto var(--md-spacing-xl);
            line-height: 1.5;
        }

        /* Section Common Styles */
        .section {
            margin-bottom: var(--md-spacing-xxl);
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: var(--md-spacing-xl);
        }

        .section-title {
            font-family: var(--md-font-logo);
            font-size: clamp(2.75rem, 5vw, 3.5rem);
            font-weight: 800;
            color: var(--md-on-surface);
            margin-bottom: var(--md-spacing-md);
            position: relative;
            display: inline-block;
            letter-spacing: -0.5px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 5px;
            background: linear-gradient(90deg, var(--md-primary), var(--md-secondary));
            border-radius: 3px;
        }

        /* Profile Card */
        .profile-card {
            background: var(--md-surface);
            border-radius: var(--md-radius-large);
            overflow: hidden;
            border: 1px solid var(--md-outline);
            transition: var(--md-transition);
            position: relative;
            margin-bottom: var(--md-spacing-xl);
        }

        .profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--md-primary), var(--md-secondary));
        }

        .profile-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--md-elevation-3);
        }

        .profile-header {
            padding: var(--md-spacing-xl);
            text-align: center;
            background: var(--md-surface-variant);
        }

        .profile-avatar {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 0 auto var(--md-spacing-lg);
        }

        .profile-avatar-img {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--md-surface);
            box-shadow: var(--md-elevation-3);
            transition: var(--md-transition);
        }

        .profile-card:hover .profile-avatar-img {
            transform: scale(1.05);
            border-color: var(--md-primary);
        }

        .avatar-upload {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--md-primary), var(--md-secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--md-on-primary);
            cursor: pointer;
            box-shadow: var(--md-elevation-2);
            transition: var(--md-transition);
        }

        .avatar-upload:hover {
            transform: scale(1.1) rotate(15deg);
        }

        .profile-info h1 {
            font-family: var(--md-font-heading);
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: var(--md-spacing-xs);
        }

        .profile-info .email {
            color: var(--md-on-surface-variant);
            font-size: 1.125rem;
            margin-bottom: var(--md-spacing-md);
        }

        /* Form Grid */
        .form-grid {
            padding: var(--md-spacing-xl);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--md-spacing-xl);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: var(--md-spacing-sm);
        }

        .form-label {
            font-family: var(--md-font-heading);
            font-size: 1rem;
            font-weight: 600;
            color: var(--md-on-surface);
        }

        .form-input {
            width: 100%;
            padding: var(--md-spacing-md) var(--md-spacing-lg);
            background: var(--md-background);
            border: 1px solid var(--md-outline);
            border-radius: var(--md-radius-medium);
            font-family: var(--md-font-body);
            font-size: 1rem;
            color: var(--md-on-surface);
            transition: var(--md-transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--md-primary);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1em;
            padding-right: var(--md-spacing-xl);
        }

        textarea.form-input {
            min-height: 120px;
            resize: vertical;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--md-spacing-lg);
            margin-bottom: var(--md-spacing-xl);
        }

        .stat-card {
            text-align: center;
            padding: var(--md-spacing-xl);
            background: var(--md-surface);
            border-radius: var(--md-radius-large);
            border: 1px solid var(--md-outline-variant);
            transition: var(--md-transition);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--md-primary), var(--md-secondary));
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--md-elevation-3);
        }

        .stat-number {
            font-family: var(--md-font-logo);
            font-size: clamp(2.5rem, 4vw, 3rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--md-primary), var(--md-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--md-spacing-sm);
        }

        .stat-label {
            color: var(--md-on-surface);
            font-size: clamp(1rem, 1.5vw, 1.125rem);
            font-weight: 500;
        }

        /* Apps Grid */
        .apps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--md-spacing-lg);
            margin-bottom: var(--md-spacing-xl);
        }

        .app-card {
            background: var(--md-surface);
            border-radius: var(--md-radius-large);
            overflow: hidden;
            border: 1px solid var(--md-outline);
            transition: var(--md-transition);
            text-decoration: none;
            color: inherit;
            position: relative;
        }

        .app-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--md-primary), var(--md-secondary));
        }

        .app-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: var(--md-elevation-3);
        }

        .app-icon {
            width: 72px;
            height: 72px;
            margin: var(--md-spacing-xl) auto var(--md-spacing-lg);
            background: linear-gradient(135deg, var(--md-primary), var(--md-secondary));
            border-radius: var(--md-radius-large);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--md-on-primary);
            font-size: 2rem;
            box-shadow: var(--md-elevation-2);
            transition: var(--md-transition);
        }

        .app-card:hover .app-icon {
            transform: rotate(15deg) scale(1.1);
        }

        .app-content {
            padding: 0 var(--md-spacing-xl) var(--md-spacing-xl);
            text-align: center;
        }

        .app-title {
            font-family: var(--md-font-heading);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--md-spacing-sm);
            color: var(--md-on-surface);
        }

        .app-stats {
            color: var(--md-on-surface-variant);
            font-size: 1.125rem;
        }

        /* NEW: Hover glow effect */
        .hover-glow {
            transition: var(--md-transition);
        }

        .hover-glow:hover {
            box-shadow: 0 0 20px rgba(26, 115, 232, 0.3);
        }

        /* NEW: Scroll progress indicator */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--md-primary), var(--md-secondary));
            z-index: 1001;
            transition: width 0.1s ease;
        }

        /* Loading Animation */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--md-background);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 4px solid var(--md-surface-variant);
            border-top: 4px solid var(--md-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Animations */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Footer */
        .footer {
            padding: var(--md-spacing-xxl) var(--md-spacing-xl);
            background: var(--md-surface);
            border-top: 1px solid var(--md-outline);
            margin-top: var(--md-spacing-xxl);
            position: relative;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--md-primary), var(--md-secondary));
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .footer-brand {
            margin-bottom: var(--md-spacing-xxl);
        }

        .footer-logo {
            font-family: var(--md-font-logo);
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--md-primary), var(--md-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--md-spacing-sm);
        }

        .footer-tagline {
            color: var(--md-on-surface-variant);
            font-size: 1.25rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .footer-bottom {
            border-top: 1px solid var(--md-outline);
            padding-top: var(--md-spacing-xl);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--md-spacing-md);
        }

        .footer-copyright {
            color: var(--md-on-surface-variant);
            font-size: 0.875rem;
        }

        .social-links {
            display: flex;
            gap: var(--md-spacing-sm);
        }

        .social-link {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--md-surface-variant);
            color: var(--md-on-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: var(--md-transition);
        }

        .social-link:hover {
            background: linear-gradient(135deg, var(--md-primary), var(--md-secondary));
            color: var(--md-on-primary);
            transform: translateY(-4px) rotate(10deg);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--md-surface);
            border-radius: var(--md-radius-extra-large);
            padding: var(--md-spacing-xl);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--md-outline);
            position: relative;
        }

        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--md-primary), var(--md-secondary));
        }

        /* Theme Toggle */
        .theme-toggle {
            background: transparent;
            border: none;
            color: var(--md-on-surface);
            cursor: pointer;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--md-transition);
            flex-shrink: 0;
            background: var(--md-surface-variant);
        }

        .theme-toggle:hover {
            background: var(--md-primary-container);
            transform: rotate(15deg);
        }

        /* User Menu */
        .user-menu {
            display: flex;
            align-items: center;
            gap: var(--md-spacing-md);
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid var(--md-outline);
            transition: var(--md-transition);
        }

        .user-avatar:hover {
            transform: scale(1.1);
            border-color: var(--md-primary);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .floating-navbar {
                width: 95%;
            }
            
            .dashboard-container {
                padding: 100px var(--md-spacing-lg) var(--md-spacing-xxl);
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .floating-navbar {
                padding: var(--md-spacing-xs) var(--md-spacing-md);
                top: var(--md-spacing-md);
            }
            
            .nav-name {
                font-size: 1.125rem;
            }
            
            .dashboard-hero h1 {
                font-size: 2.75rem;
            }
            
            .dashboard-hero p {
                font-size: 1.125rem;
            }
            
            .section-title {
                font-size: 2.5rem;
            }
            
            .stats-grid,
            .apps-grid {
                grid-template-columns: 1fr;
            }
            
            .profile-avatar {
                width: 140px;
                height: 140px;
            }
            
            .profile-avatar-img {
                width: 140px;
                height: 140px;
            }
            
            .floating-element {
                display: none;
            }
            
            .footer-bottom {
                flex-direction: column;
                text-align: center;
                gap: var(--md-spacing-lg);
            }
        }

        @media (max-width: 480px) {
            .dashboard-hero h1 {
                font-size: 2.5rem;
            }
            
            .dashboard-hero p {
                font-size: 1rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .nav-name {
                display: none;
            }
            
            .nav-brand {
                gap: 0;
            }
            
            .profile-info h1 {
                font-size: 2rem;
            }
            
            .profile-avatar {
                width: 120px;
                height: 120px;
            }
            
            .profile-avatar-img {
                width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body class="light-theme">
    <!-- NEW: Interactive cursor elements -->
    <div class="interactive-cursor" id="cursor"></div>
    <div class="cursor-dot" id="cursorDot"></div>
    
    <!-- NEW: Scroll progress indicator -->
    <div class="scroll-progress" id="scrollProgress"></div>
    
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loader"></div>
    </div>

    <!-- Enhanced Animated Background -->
    <div class="animated-bg">
        <div class="gradient-bg"></div>
        <div class="mesh-overlay"></div>
    </div>

    <!-- Floating SVG Elements -->
    <svg class="floating-element floating-element-1" viewBox="0 0 277 301" fill="none">
        <path d="M108.103 8.24078C126.954 -2.64276 150.179 -2.64276 169.03 8.24078L246.169 52.7773C265.02 63.6609 276.633 83.7745 276.633 105.542V194.615C276.633 216.382 265.02 236.495 246.169 247.379L169.03 291.915C150.179 302.799 126.954 302.799 108.103 291.915L30.9635 247.379C12.1126 236.495 0.5 216.382 0.5 194.615V105.542C0.5 83.7745 12.1126 63.6609 30.9635 52.7773L108.103 8.24078Z" fill="url(#grad1)" fill-rule="evenodd" clip-rule="evenodd"/>
        <defs>
            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:var(--md-primary);stop-opacity:0.3" />
                <stop offset="100%" style="stop-color:var(--md-secondary);stop-opacity:0.3" />
            </linearGradient>
        </defs>
    </svg>

    <svg class="floating-element floating-element-2" viewBox="0 0 282 281" fill="none">
        <path d="M75.9469 280.078C91.5033 280.078 105.96 275.398 117.97 267.376C130.585 258.951 151.308 258.951 163.924 267.376C175.934 275.398 190.39 280.078 205.947 280.078C247.615 280.078 281.394 246.499 281.394 205.078C281.394 189.768 276.779 175.529 268.856 163.661C260.282 150.817 260.282 129.339 268.856 116.496C276.779 104.628 281.394 90.3887 281.394 75.0781C281.394 33.6568 247.615 0.078125 205.947 0.078125C190.39 0.078125 175.934 4.75843 163.924 12.7798C151.308 21.2056 130.585 21.2056 117.97 12.7798C105.96 4.75843 91.5033 0.078125 75.9469 0.078125C34.2787 0.078125 0.5 33.6568 0.5 75.0781C0.5 90.3887 5.11505 104.628 13.0377 116.496C21.6119 129.339 21.6119 150.817 13.0377 163.661C5.11505 175.529 0.5 189.768 0.5 205.078C0.5 246.499 34.2787 280.078 75.9469 280.078Z" fill="url(#grad2)" fill-rule="evenodd" clip-rule="evenodd"/>
        <defs>
            <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:var(--md-primary-light);stop-opacity:0.25" />
                <stop offset="100%" style="stop-color:var(--md-secondary-light);stop-opacity:0.25" />
            </linearGradient>
        </defs>
    </svg>

    <!-- Modern Floating Pill Navbar -->
    <nav class="floating-navbar">
        <!-- Left side: Logo and Brand -->
        <a href="https://aditya-cmd-max.github.io/reverbit/" class="nav-brand">
            <div class="nav-logo">
                <i class="fas fa-infinity"></i>
            </div>
            <span class="nav-name">Reverbit</span>
        </a>

        <!-- Desktop Navigation Links -->
        <div class="desktop-nav" style="display: flex; align-items: center; gap: var(--md-spacing-md);">
            <a href="#profile" class="nav-link active" style="color: var(--md-on-surface); text-decoration: none; padding: var(--md-spacing-sm) var(--md-spacing-md); border-radius: var(--md-radius-pill); transition: var(--md-transition);">
                <i class="fas fa-user" style="margin-right: 4px;"></i>
                Profile
            </a>
            <a href="#apps" class="nav-link" style="color: var(--md-on-surface); text-decoration: none; padding: var(--md-spacing-sm) var(--md-spacing-md); border-radius: var(--md-radius-pill); transition: var(--md-transition);">
                <i class="fas fa-th-large" style="margin-right: 4px;"></i>
                My Apps
            </a>
            <a href="https://aditya-cmd-max.github.io/reverbit/ecosystem" class="nav-link" style="color: var(--md-on-surface); text-decoration: none; padding: var(--md-spacing-sm) var(--md-spacing-md); border-radius: var(--md-radius-pill); transition: var(--md-transition);">
                <i class="fas fa-network-wired" style="margin-right: 4px;"></i>
                All Tools
            </a>
            <a href="https://aditya-cmd-max.github.io/reverbit/" class="nav-link" style="color: var(--md-on-surface); text-decoration: none; padding: var(--md-spacing-sm) var(--md-spacing-md); border-radius: var(--md-radius-pill); transition: var(--md-transition);">
                <i class="fas fa-home" style="margin-right: 4px;"></i>
                Home
            </a>
            <!-- Theme Toggle Button -->
            <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                <span class="material-icons-round">dark_mode</span>
            </button>
            <!-- User Avatar -->
            <div class="user-avatar" id="userAvatar" onclick="toggleUserMenu()">
                <img id="userAvatarImg" src="https://ui-avatars.com/api/?name=User&background=1a73e8&color=fff" alt="User">
            </div>
        </div>
    </nav>

    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Hero Section -->
        <section class="dashboard-hero">
            <h1 class="hero-title">Welcome Back!</h1>
            <p class="hero-subtitle">Your personal dashboard for all Reverbit AI tools and analytics</p>
            <div class="hero-cta">
                <a href="#profile" class="btn btn-filled hover-glow">
                    <i class="fas fa-user-edit" style="margin-right: 8px;"></i>
                    Edit Profile
                </a>
                <a href="#apps" class="btn btn-outlined hover-glow">
                    <i class="fas fa-rocket" style="margin-right: 8px;"></i>
                    Launch Apps
                </a>
            </div>
        </section>

        <!-- Profile Section -->
        <section class="section" id="profile">
            <div class="section-header">
                <h2 class="section-title">Your Profile</h2>
                <p class="section-subtitle" style="color: var(--md-on-surface-variant); font-size: 1.25rem; max-width: 700px; margin: 0 auto;">Manage your personal information and preferences</p>
            </div>
            
            <div class="profile-card animate-on-scroll hover-glow">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <img id="profileAvatarImg" src="https://ui-avatars.com/api/?name=User&background=1a73e8&color=fff&size=120" alt="Profile" class="profile-avatar-img">
                        <div class="avatar-upload" onclick="document.getElementById('avatarInput').click()">
                            <i class="fas fa-camera"></i>
                            <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                        </div>
                    </div>
                    <div class="profile-info">
                        <h1 id="userName">Loading...</h1>
                        <p class="email" id="userEmail">Loading...</p>
                        <p class="member-since" id="memberSince" style="color: var(--md-on-surface-variant);">Member since: Loading...</p>
                    </div>
                </div>

                <form id="profileForm" class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" id="fullName" class="form-input" placeholder="Enter your full name">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="email" class="form-input" placeholder="Enter your email" disabled>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Bio</label>
                        <textarea id="bio" class="form-input" rows="3" placeholder="Tell us about yourself"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Country</label>
                        <select id="country" class="form-input form-select">
                            <option value="">Select Country</option>
                            <option value="IN">India</option>
                            <option value="US">United States</option>
                            <option value="GB">United Kingdom</option>
                            <option value="CA">Canada</option>
                            <option value="AU">Australia</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Date of Birth</label>
                        <input type="date" id="dob" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Gender</label>
                        <select id="gender" class="form-input form-select">
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                            <option value="prefer-not-to-say">Prefer not to say</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="grid-column: 1 / -1; display: flex; gap: var(--md-spacing-md); margin-top: var(--md-spacing-md);">
                        <button type="submit" class="btn btn-filled">
                            <i class="fas fa-save"></i>
                            Save Changes
                        </button>
                        <button type="button" class="btn btn-outlined" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i>
                            Sign Out
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Usage Analytics -->
        <section class="section" id="usage">
            <div class="section-header">
                <h2 class="section-title">Usage Analytics</h2>
                <p class="section-subtitle" style="color: var(--md-on-surface-variant); font-size: 1.25rem; max-width: 700px; margin: 0 auto;">Track your activity across Reverbit tools</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card animate-on-scroll hover-glow">
                    <div class="stat-number" id="totalTime">0 hours</div>
                    <div class="stat-label">Total Time Spent</div>
                    <p style="color: var(--md-on-surface-variant); margin-top: var(--md-spacing-sm); font-size: 0.95rem;">Across all Reverbit apps</p>
                </div>
                
                <div class="stat-card animate-on-scroll hover-glow">
                    <div class="stat-number" id="streak">0 days</div>
                    <div class="stat-label">Active Streak</div>
                    <p style="color: var(--md-on-surface-variant); margin-top: var(--md-spacing-sm); font-size: 0.95rem;">Consecutive days using Reverbit</p>
                </div>
                
                <div class="stat-card animate-on-scroll hover-glow">
                    <div class="stat-number" id="mostUsedApp">Loading...</div>
                    <div class="stat-label">Most Used App</div>
                    <p style="color: var(--md-on-surface-variant); margin-top: var(--md-spacing-sm); font-size: 0.95rem;" id="mostUsedTime">0 minutes</p>
                </div>
            </div>
        </section>

        <!-- Apps Section -->
        <section class="section" id="apps">
            <div class="section-header">
                <h2 class="section-title">My Reverbit Apps</h2>
                <p class="section-subtitle" style="color: var(--md-on-surface-variant); font-size: 1.25rem; max-width: 700px; margin: 0 auto;">Access all your AI-powered tools in one place</p>
            </div>
            
            <div class="apps-grid">
                <a href="https://aditya-cmd-max.github.io/cloverai/" class="app-card animate-on-scroll hover-glow">
                    <div class="app-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <div class="app-content">
                        <h3 class="app-title">Clover AI</h3>
                        <p class="app-stats" id="cloverTime">0 mins this week</p>
                        <p style="color: var(--md-on-surface-variant); margin-top: var(--md-spacing-sm); font-size: 0.95rem;">Intelligent tutoring system with personalized learning</p>
                    </div>
                </a>
                
                <a href="https://aditya-cmd-max.github.io/mindscribe/" class="app-card animate-on-scroll hover-glow">
                    <div class="app-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="app-content">
                        <h3 class="app-title">MindScribe</h3>
                        <p class="app-stats" id="mindscribeTime">0 mins this week</p>
                        <p style="color: var(--md-on-surface-variant); margin-top: var(--md-spacing-sm); font-size: 0.95rem;">AI-powered note-taking and organization</p>
                    </div>
                </a>
                
                <a href="https://aditya-cmd-max.github.io/Peo/" class="app-card animate-on-scroll hover-glow">
                    <div class="app-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="app-content">
                        <h3 class="app-title">Peo</h3>
                        <p class="app-stats" id="peoTime">0 mins this week</p>
                        <p style="color: var(--md-on-surface-variant); margin-top: var(--md-spacing-sm); font-size: 0.95rem;">Natural text-to-speech with emotion</p>
                    </div>
                </a>
                
                <a href="https://aditya-cmd-max.github.io/reverbit/ecosystem" class="app-card animate-on-scroll hover-glow">
                    <div class="app-icon" style="background: linear-gradient(135deg, #ea4335, #d93025);">
                        <i class="fas fa-network-wired"></i>
                    </div>
                    <div class="app-content">
                        <h3 class="app-title">All Tools</h3>
                        <p class="app-stats">Explore more</p>
                        <p style="color: var(--md-on-surface-variant); margin-top: var(--md-spacing-sm); font-size: 0.95rem;">Complete Reverbit ecosystem</p>
                    </div>
                </a>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">
                <h2 class="footer-logo">Reverbit</h2>
                <p class="footer-tagline">For every Bit - Dashboard</p>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-copyright">
                    Made with <i class="fas fa-heart" style="color: #ff4444;"></i> and <i class="fas fa-code"></i> by Aditya Jha.
                </div>
                
                <div class="social-links">
                    <a href="https://www.linkedin.com/in/aditya-jha-2b0860399/" class="social-link">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="https://github.com/aditya-cmd-max/" class="social-link">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="https://youtube.com/@Reverbit/" class="social-link">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            </div>
            <div class="footer-copyright" style="margin-top: var(--md-spacing-md);">
                &copy; 2025 Reverbit Innovations. All Rights Reserved
            </div>
        </div>
    </footer>

    <!-- Logout Modal -->
    <div id="logoutModal" class="modal">
        <div class="modal-content">
            <h2 style="font-family: var(--md-font-heading); margin-bottom: var(--md-spacing-lg);">Sign Out</h2>
            <p style="margin-bottom: var(--md-spacing-xl); color: var(--md-on-surface);">Are you sure you want to sign out?</p>
            <div style="display: flex; gap: var(--md-spacing-md); justify-content: flex-end;">
                <button class="btn btn-outlined" onclick="closeModal('logoutModal')">Cancel</button>
                <button class="btn btn-filled" onclick="confirmLogout()">Sign Out</button>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDE0eix0uVHuUS5P5DbuPA-SZt6pD8ob8A",
            authDomain: "reverbit11.firebaseapp.com",
            projectId: "reverbit11",
            storageBucket: "reverbit11.firebasestorage.app",
            messagingSenderId: "607495314412",
            appId: "1:607495314412:web:8c098f88b0d3b4620f7ec9",
            measurementId: "G-DMWMRM1M47"
        };

        // DOM Elements
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('.material-icons-round');
        const loadingScreen = document.getElementById('loading');
        const animateElements = document.querySelectorAll('.animate-on-scroll');
        const floatingNavbar = document.querySelector('.floating-navbar');
        const cursor = document.getElementById('cursor');
        const cursorDot = document.getElementById('cursorDot');
        const scrollProgress = document.getElementById('scrollProgress');
        const navLinks = document.querySelectorAll('.nav-link');

        // Initialize Firebase
        let auth, db, storage;
        let currentUser = null;

        // Theme Toggle
        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            document.body.classList.toggle('dark-theme');
            
            if (document.body.classList.contains('dark-theme')) {
                themeIcon.textContent = 'light_mode';
                localStorage.setItem('theme', 'dark');
            } else {
                themeIcon.textContent = 'dark_mode';
                localStorage.setItem('theme', 'light');
            }
        }

        themeToggle.addEventListener('click', toggleTheme);

        // Load saved theme preference
        function loadThemePreference() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
                document.body.classList.remove('light-theme');
                themeIcon.textContent = 'light_mode';
            } else {
                document.body.classList.add('light-theme');
                document.body.classList.remove('dark-theme');
                themeIcon.textContent = 'dark_mode';
            }
        }

        // NEW: Interactive cursor
        function initInteractiveCursor() {
            let mouseX = 0;
            let mouseY = 0;
            let cursorX = 0;
            let cursorY = 0;
            let cursorDotX = 0;
            let cursorDotY = 0;
            
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            function animateCursor() {
                cursorX += (mouseX - cursorX) * 0.1;
                cursorY += (mouseY - cursorY) * 0.1;
                cursor.style.left = cursorX + 'px';
                cursor.style.top = cursorY + 'px';
                
                cursorDotX += (mouseX - cursorDotX) * 0.3;
                cursorDotY += (mouseY - cursorDotY) * 0.3;
                cursorDot.style.left = cursorDotX + 'px';
                cursorDot.style.top = cursorDotY + 'px';
                
                requestAnimationFrame(animateCursor);
            }
            
            animateCursor();
            
            const interactiveElements = document.querySelectorAll('a, button, .app-card, .stat-card, .profile-card');
            
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.style.width = '40px';
                    cursor.style.height = '40px';
                    cursor.style.background = 'var(--md-secondary)';
                });
                
                el.addEventListener('mouseleave', () => {
                    cursor.style.width = '20px';
                    cursor.style.height = '20px';
                    cursor.style.background = 'var(--md-primary)';
                });
            });
        }

        // NEW: Scroll progress indicator
        function initScrollProgress() {
            window.addEventListener('scroll', () => {
                const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (window.scrollY / windowHeight) * 100;
                scrollProgress.style.width = scrolled + '%';
            });
        }

        // Initialize animations on scroll
        function initScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            animateElements.forEach(element => {
                observer.observe(element);
            });
        }

        // Set active nav link based on scroll position
        function setActiveNavLink() {
            const sections = document.querySelectorAll('section[id]');
            const scrollPos = window.scrollY + 100;
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                const sectionId = section.getAttribute('id');
                
                if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                    current = sectionId;
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                const href = link.getAttribute('href');
                if (href === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }

        // Smooth scroll for anchor links
        function initSmoothScroll() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 100,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }

        // Initialize app on load
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Hide loading screen
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }, 800);
                
                // Initialize UI components
                loadThemePreference();
                initInteractiveCursor();
                initScrollProgress();
                initScrollAnimations();
                initSmoothScroll();
                
                // Set active nav link on scroll
                window.addEventListener('scroll', setActiveNavLink);
                setActiveNavLink();
                
                // Initialize Firebase
                if (!firebase.apps.length) {
                    firebase.initializeApp(firebaseConfig);
                }
                
                auth = firebase.auth();
                db = firebase.firestore();
                storage = firebase.storage();

                // Check authentication state
                auth.onAuthStateChanged(async (user) => {
                    if (user) {
                        currentUser = user;
                        await loadUserData(user);
                        await loadUsageData(user.uid);
                        setupAuthCookies(user);
                    } else {
                        window.location.href = 'https://aditya-cmd-max.github.io/signin';
                    }
                });
            } catch (error) {
                console.error('Initialization error:', error);
                loadingScreen.classList.add('hidden');
            }
        });

        // Load user data from Firestore
        async function loadUserData(user) {
            try {
                const userDoc = await db.collection('users').doc(user.uid).get();
                
                // Update UI with user data
                document.getElementById('userName').textContent = user.displayName || 'User';
                document.getElementById('userEmail').textContent = user.email;
                document.getElementById('userAvatarImg').src = user.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName || 'User')}&background=1a73e8&color=fff`;
                document.getElementById('profileAvatarImg').src = user.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName || 'User')}&background=1a73e8&color=fff&size=120`;
                
                // Calculate member since
                const joinDate = user.metadata.creationTime;
                const formattedDate = new Date(joinDate).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                document.getElementById('memberSince').textContent = `Member since: ${formattedDate}`;
                
                // Populate form fields
                document.getElementById('fullName').value = user.displayName || '';
                document.getElementById('email').value = user.email || '';
                
                if (userDoc.exists) {
                    const userData = userDoc.data();
                    document.getElementById('bio').value = userData.bio || '';
                    document.getElementById('country').value = userData.country || '';
                    document.getElementById('dob').value = userData.dob || '';
                    document.getElementById('gender').value = userData.gender || '';
                }
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        // Load usage data
        async function loadUsageData(userId) {
            try {
                const usageDoc = await db.collection('usage').doc(userId).get();
                
                if (usageDoc.exists) {
                    const usageData = usageDoc.data();
                    
                    // Update app times
                    document.getElementById('cloverTime').textContent = `${usageData.cloverAI || 0} mins this week`;
                    document.getElementById('mindscribeTime').textContent = `${usageData.mindscribe || 0} mins this week`;
                    document.getElementById('peoTime').textContent = `${usageData.peo || 0} mins this week`;
                    
                    // Calculate total time
                    const totalMinutes = (usageData.cloverAI || 0) + (usageData.mindscribe || 0) + (usageData.peo || 0);
                    const totalHours = (totalMinutes / 60).toFixed(1);
                    document.getElementById('totalTime').textContent = `${totalHours} hours`;
                    
                    // Find most used app
                    const apps = [
                        { name: 'Clover AI', time: usageData.cloverAI || 0 },
                        { name: 'MindScribe', time: usageData.mindscribe || 0 },
                        { name: 'Peo', time: usageData.peo || 0 }
                    ];
                    
                    const mostUsed = apps.reduce((prev, current) => 
                        prev.time > current.time ? prev : current
                    );
                    
                    document.getElementById('mostUsedApp').textContent = mostUsed.name;
                    document.getElementById('mostUsedTime').textContent = `${mostUsed.time} minutes`;
                    
                    // Update streak
                    document.getElementById('streak').textContent = `${usageData.streak || 0} days`;
                }
            } catch (error) {
                console.error('Error loading usage data:', error);
            }
        }

        // Setup authentication cookies for SSO
        function setupAuthCookies(user) {
            const sessionToken = btoa(JSON.stringify({
                uid: user.uid,
                email: user.email,
                timestamp: Date.now()
            }));
            
            document.cookie = `reverbit_auth=${sessionToken}; path=/; max-age=86400; samesite=lax`;
            
            localStorage.setItem('reverbit_auth', sessionToken);
            localStorage.setItem('reverbit_user', JSON.stringify({
                uid: user.uid,
                email: user.email,
                displayName: user.displayName,
                photoURL: user.photoURL
            }));
        }

        // Handle profile form submission
        document.getElementById('profileForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!currentUser) return;
            
            try {
                const userData = {
                    fullName: document.getElementById('fullName').value,
                    bio: document.getElementById('bio').value,
                    country: document.getElementById('country').value,
                    dob: document.getElementById('dob').value,
                    gender: document.getElementById('gender').value,
                    updatedAt: new Date().toISOString()
                };
                
                // Update Firestore
                await db.collection('users').doc(currentUser.uid).set(userData, { merge: true });
                
                // Update user profile in Firebase Auth
                await currentUser.updateProfile({
                    displayName: userData.fullName
                });
                
                alert('Profile updated successfully!');
                location.reload();
            } catch (error) {
                console.error('Error updating profile:', error);
                alert('Error updating profile. Please try again.');
            }
        });

        // Handle avatar upload
        document.getElementById('avatarInput').addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                alert('Please select an image file');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) {
                alert('Image must be less than 5MB');
                return;
            }
            
            try {
                // Upload to Firebase Storage
                const storageRef = storage.ref();
                const avatarRef = storageRef.child(`avatars/${currentUser.uid}/${Date.now()}_${file.name}`);
                const uploadTask = await avatarRef.put(file);
                const downloadURL = await uploadTask.ref.getDownloadURL();
                
                // Update user profile with new photo URL
                await currentUser.updateProfile({
                    photoURL: downloadURL
                });
                
                // Update Firestore
                await db.collection('users').doc(currentUser.uid).set({
                    photoURL: downloadURL,
                    updatedAt: new Date().toISOString()
                }, { merge: true });
                
                // Update UI
                document.getElementById('userAvatarImg').src = downloadURL;
                document.getElementById('profileAvatarImg').src = downloadURL;
                
                alert('Profile picture updated successfully!');
            } catch (error) {
                console.error('Error uploading avatar:', error);
                alert('Error uploading image. Please try again.');
            }
        });

        // Logout function
        function logout() {
            document.getElementById('logoutModal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        async function confirmLogout() {
            try {
                await auth.signOut();
                // Clear cookies and localStorage
                document.cookie = 'reverbit_auth=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT';
                localStorage.removeItem('reverbit_auth');
                localStorage.removeItem('reverbit_user');
                
                // Redirect to signin
                window.location.href = 'https://aditya-cmd-max.github.io/signin';
            } catch (error) {
                console.error('Error signing out:', error);
            }
        }

        // Utility functions
        function toggleUserMenu() {
            // Implement user menu dropdown if needed
        }

        // Keyboard navigation improvements
        document.addEventListener('keydown', (e) => {
            // Theme toggle with Shift+T
            if (e.shiftKey && e.key === 'T') {
                toggleTheme();
            }
        });
    </script>
</body>
</html>
